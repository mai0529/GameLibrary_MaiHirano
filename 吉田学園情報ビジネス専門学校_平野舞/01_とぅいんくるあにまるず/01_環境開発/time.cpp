//-----------------------------------------------------------------------------------------------
//
// タイマーの処理[time.cpp]
// Author : 平野舞
//
//-----------------------------------------------------------------------------------------------

//-----------------------------------------------------------------------------------------------
// インクルードファイル
//-----------------------------------------------------------------------------------------------
#include "time.h"		// タイマ

//-----------------------------------------------------------------------------------------------
// 定数宣言
//-----------------------------------------------------------------------------------------------
static const int MAX_FRAME = 60;

//-----------------------------------------------------------------------------------------------
// 静的メンバ変数宣言
//-----------------------------------------------------------------------------------------------
// タイマのポインタ
CTime* CTime::m_pTime = nullptr;

//-----------------------------------------------------------------------------------------------
// コンストラクタ
//-----------------------------------------------------------------------------------------------
CTime::CTime()
	:m_nFrame(0), m_nTime(0)
{

}

//-----------------------------------------------------------------------------------------------
// デストラクタ
//-----------------------------------------------------------------------------------------------
CTime::~CTime()
{

}

//-----------------------------------------------------------------------------------------------
// インスタンスの生成
//-----------------------------------------------------------------------------------------------
void CTime::CreateInstance()
{
	if (m_pTime == nullptr)
	{// nullptrだったら
		// メモリを生成
		m_pTime = new CTime;
	}
}

//-----------------------------------------------------------------------------------------------
// インスタンスの取得
//-----------------------------------------------------------------------------------------------
CTime* CTime::GetInstance()
{
	if (m_pTime != nullptr)
	{// nullptrではなかったら
		return m_pTime;
	}

	return nullptr;
}

//-----------------------------------------------------------------------------------------------
// 初期化
//-----------------------------------------------------------------------------------------------
void CTime::Init()
{

}

//-----------------------------------------------------------------------------------------------
// 終了
//-----------------------------------------------------------------------------------------------
void CTime::Uninit()
{
	if (m_pTime != nullptr)
	{// nullptrではなかったら
		// メモリを破棄する
		delete m_pTime;

		// nullptrにする
		m_pTime = nullptr;
	}
}

//-----------------------------------------------------------------------------------------------
// 更新
//-----------------------------------------------------------------------------------------------
void CTime::Update()
{
	if (m_nFrame != MAX_FRAME)
	{// フレーム数が60ではなかったら
		// フレーム数をカウントする
		m_nFrame++;
	}

	if (m_nFrame == MAX_FRAME)
	{// フレーム数が60になったら
		// 秒数を加算する
		m_nTime++;
		// フレーム数を0に戻す
		m_nFrame = 0;
	}
}

//-----------------------------------------------------------------------------------------------
// タイマの秒数を取得
//-----------------------------------------------------------------------------------------------
int CTime::GetTime()
{
	return m_nTime;
}

//-----------------------------------------------------------------------------------------------
// タイマのリセット
//-----------------------------------------------------------------------------------------------
void CTime::ResetTime()
{
	// フレーム数の初期化
	m_nFrame = 0;

	// タイマの初期化
	m_nTime = 0;
}