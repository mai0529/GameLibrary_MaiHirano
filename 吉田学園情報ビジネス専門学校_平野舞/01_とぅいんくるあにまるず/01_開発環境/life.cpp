//-----------------------------------------------------------------------------------------------
//
// プレイヤーの処理[player.cpp]
// Author : 平野舞
//
//-----------------------------------------------------------------------------------------------

//-----------------------------------------------------------------------------------------------
// インクルードファイル
//-----------------------------------------------------------------------------------------------
#include "life.h"			// 寿命
#include "object2D.h"		// オブジェクト2D
#include "application.h"	// アプリケーション
#include "renderer.h"		// レンダリング
#include "TextureFileName.h"	// 画像のファイル名

//-----------------------------------------------------------------------------------------------
// 定数宣言
//-----------------------------------------------------------------------------------------------
// 幅
static const float LIFE_WIDTH = 40.0f;
// 高さ
static const float LIFE_HEIGHT = 40.0f;

//-----------------------------------------------------------------------------------------------
// コンストラクタ
//-----------------------------------------------------------------------------------------------
CLife::CLife()
	:m_pos(0.0f,0.0f,0.0f)
{
	for (int nCntLife = 0; nCntLife < MAX_LIFE; nCntLife++)
	{
		m_paObject2D[nCntLife] = nullptr;
	}
}

//-----------------------------------------------------------------------------------------------
// デストラクタ
//-----------------------------------------------------------------------------------------------
CLife::~CLife()
{

}

//-----------------------------------------------------------------------------------------------
// 生成
//
//const D3DXVECTOR3& pos → 生成する座標位置
//-----------------------------------------------------------------------------------------------
CLife* CLife::Create(const D3DXVECTOR3& pos)
{
	// ポインタクラスを宣言
	CLife* pLife = new CLife;

	if (pLife != nullptr)
	{// もしnullptrではなかったら
		// 位置
		pLife->SetPosition(pos);
		 // 初期化
		pLife->Init();
	}

	return pLife;
}

//-----------------------------------------------------------------------------------------------
// 初期化
//
// const D3DXVECTOR3& pos → 最初に表示する座標位置
//-----------------------------------------------------------------------------------------------
HRESULT CLife::Init()
{
	for (int nCntLife = 0; nCntLife < MAX_LIFE; nCntLife++)
	{
		// オブジェクト2Dを生成
		m_paObject2D[nCntLife] = CObject2D::Create(TEX_LIFE,D3DXVECTOR3(m_pos.x + (45.0f * nCntLife),m_pos.y,0.0f) , D3DXVECTOR3(LIFE_WIDTH, LIFE_HEIGHT, 0.0f));
	}

	//オブジェクトタイプを設定
	SetObjectType(EOBJECT_TYPE::EOBJECT_TYPE_LIFE);

	return S_OK;
}

//-----------------------------------------------------------------------------------------------
// 終了
//-----------------------------------------------------------------------------------------------s
void CLife::Uninit()
{
	for (int nCntLife = 0; nCntLife < MAX_LIFE; nCntLife++)
	{
		if (m_paObject2D[nCntLife] != nullptr)
		{// nullptrではなかったら
			m_paObject2D[nCntLife]->Uninit();
		}
	}
}

//-----------------------------------------------------------------------------------------------
// 更新
//-----------------------------------------------------------------------------------------------
void CLife::Update()
{

}

//-----------------------------------------------------------------------------------------------
// 描画
//-----------------------------------------------------------------------------------------------
void CLife::Draw()
{
	
}

//-----------------------------------------------------------------------------------------------
// 削除する
//-----------------------------------------------------------------------------------------------
void CLife::Delete(int nCntLife)
{
	if (m_paObject2D[nCntLife] != nullptr)
	{
		// 終了
		m_paObject2D[nCntLife]->Uninit();

		// nullptrにする
		m_paObject2D[nCntLife] = nullptr;
	}
}

//-----------------------------------------------------------------------------------------------
// 位置の設定
//
// const D3DXVECTOR3& pos → 設定したい位置
//-----------------------------------------------------------------------------------------------
void CLife::SetPosition(const D3DXVECTOR3& pos)
{
	m_pos = pos;
}

//-----------------------------------------------------------------------------------------------
// 位置の取得
//-----------------------------------------------------------------------------------------------
const D3DXVECTOR3& CLife::GetPosition()
{
	return m_pos;
}